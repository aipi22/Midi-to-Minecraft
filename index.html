<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Midi To Minecraft Maker</title>
    <script src="https://unpkg.com/@tonejs/midi"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="box center">
        <h1>Make your MIDI file play in Minecraft</h1>
        <b id="bold">By aipi22</b>
    </div>

    <div class="box center">
        <p>Upload your file: (.mid file)</p>
        <label class="file-btn">
            <p style="color:#00f2ff;" id="UploadText">Select File</p>
            <input type="file" accept=".mid, .midi" id="midiInput" hidden>
        </label>
    </div>

    <div id="controls" class="box center">
        <p>Track 1 (Channel 0):
            <select id="inst-0"><option value="harp">Harp</option><option value="snare">Snare</option><option value="didgeridoo">Didgeridoo</option><option value="bit">Bit</option></select>
            <input id="vol-0" type="number" step="0.1" value="1.0" placeholder="Vol">
        </p>
        <p>Track 2 (Channel 1):
            <select id="inst-1"><option value="bit">Bit</option><option value="snare">Snare</option><option value="didgeridoo">Didgeridoo</option><option value="harp">Harp</option></select>
            <input id="vol-1" type="number" step="0.1" value="1.0" placeholder="Vol">
        </p>
        <p>Track 3 (Channel 2):
            <select id="inst-2"><option value="didgeridoo">Didgeridoo</option><option value="snare">Snare</option><option value="bit">Bit</option><option value="harp">Harp</option></select>
            <input id="vol-2" type="number" step="0.1" value="1.0" placeholder="Vol">
        </p>
        <p>Track 9 (Channel 9):
            <select id="inst-9"><option value="snare">Snare</option><option value="didgeridoo">Didgeridoo</option><option value="bit">Bit</option><option value="harp">Harp</option></select>
            <input id="vol-9" type="number" step="0.1" value="1.0" placeholder="Vol">
        </p>
    </div>

    <div class="box center">
        <button onclick="processMidi()" id="btn">Generate .mcfunction</button>
        <br>
        <p>Put this output into your .mcfunction file of a datapack. To run it in game, first /reload and then "/scoreboard objectives add music_tick dummy" then finally to restart the song "/scoreboard players set #t music_tick 0". You will need to step the song, so you can either put a repeating command block to "/function {datapack name}:tick" or else put this in your .json file: "{"values": ["music:tick"]}</p>
        <br>
        <div class="horizontal">
            <textarea id="output" rows="10" cols="200" placeholder="Your commands will appear here..."></textarea>
            <button id="copyButton" onclick="copyResult()">Copy Result</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
